[Unit]
Description=Condense URL Agent (make AI-ready envelope JSON)
After=default.target

[Service]
Type=oneshot
Environment=XAIO_PROJECT_DIR=%h/xAIO-URL-Agent
EnvironmentFile=-%h/.config/xaio-url-agent.env
EnvironmentFile=-${XAIO_PROJECT_DIR}/.runtime/xaio-url-agent.env
WorkingDirectory=${XAIO_PROJECT_DIR}
ExecStart=/usr/bin/flock -n ./locks/condense.lock ${XAIO_PROJECT_DIR}/venv/bin/python ${XAIO_PROJECT_DIR}/src/condense_queue.py
